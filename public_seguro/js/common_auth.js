!function(){function e(e){try{const t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():""}catch(e){return""}}function t(){return e("XSRF-TOKEN")||e("xsrf-token")||e("csrf_token")}async function n(e,n){const o={...n||{}};o.credentials||(o.credentials="same-origin");const i={...(()=>{try{if(o.headers&&"object"==typeof o.headers&&"function"==typeof o.headers.forEach&&"function"==typeof o.headers.entries)return Object.fromEntries(o.headers.entries())}catch(e){}return{...o.headers||{}}})()};i.Accept||(i.Accept="application/json");const c=String(o.method||"GET").toUpperCase();if(("GET"===c||"HEAD"===c)&&"body"in o)try{delete o.body}catch(e){o.body=void 0}if("POST"===c||"PUT"===c||"DELETE"===c){let e=t();if(!e){try{await fetch("/csrf-token",{credentials:"same-origin"})}catch(e){}e=t()}e&&(i["X-CSRF-Token"]=e);o.body&&"object"==typeof o.body&&!(o.body instanceof FormData)&&!(o.body instanceof Blob)&&!(o.body instanceof URLSearchParams)&&(i["Content-Type"]||(i["Content-Type"]="application/json"),String(i["Content-Type"]).toLowerCase().includes("application/json")&&(o.body=JSON.stringify(o.body))),i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest")}return o.headers=i,window.fetch(e,o)}window.getCsrfToken=t,window.authFetch=n,window.qrFlowLog=async function(e,t){try{const o={event:e,details:t};await n("/ui/qr-flow-log",{method:"POST",body:o,keepalive:!0})}catch(e){}}}();